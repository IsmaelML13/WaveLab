<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | Wave Lab </title>
    <link rel="icon" href="assets/frascoRosa.png">
    <link rel="stylesheet" href="../css/estiloAnalise.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">
</head>

<body>
    <div class="tela">
        <div class="navbar">
            <div class="cima">
                <div class="img"><img src="../assets/Loog preta.svg" height="125px"></div>
                <div class="camposP">
                    <ul class="listaWave">
                        <li class="lista">
                            <a href="../dashboard/dashnoardInitialPage.html">
                                <!-- <i class="uil uil-create-dashboard"></i> -->
                                <span class="lista">Buscador</span>
                            </a>
                        </li>
                        <li class="lista">
                            <a href="../dashboard/dashboardChat.html">
                                <!-- <i class="uil uil-presentation-line"></i> -->
                                <span class="lista">Chat</span>
                            </a>
                        </li>
                        <li class="agora">
                            <a href="../dashboard/dashboardAnalise.html">
                                <!-- <i class="uil uil-presentation-line"></i> -->
                                <span class="lista">Análise dos usuários</span>
                            </a>
                        </li>
                        <!-- <li class="agora">
                        <a class="agora" href="">Buscador</a>
                    </li>
                    <li class="agora">
                        <a href="">Playlist</a>
                    </li>
                    <li class="agora">
                        <a href="">Análise dos usuários</a>
                    </li> -->
                    </ul>
                </div>
            </div>
            <div class="baixo">
                <div class="frasquinho">
                    <img src="../assets/linha.svg" width="103px" alt="">
                    <img src="../assets/frasquinhoRosa.svg" alt="">
                    <img src="../assets/linha.svg" width="103px" alt="">
                </div>
                <div id="divUsu" class="usuario">
                    <span id="nomeUsu"></span>
                </div>
                <div class="exit">
                    <a href="../index.html">
                        <img src="../assets/exit.svg" alt="">
                    </a>
                </div>
            </div>
        </div>
        <div class="conteudo" id="conteudo">

            <div id="caixaBuscador" class="caixaBuscador">
                <div id="graficos">
                    <div id="grafico1" class="">
                        <h3 class="tituloGraficos">
                            <span id="tituloAquario1">Faixa de idade dos usuarios</span>
                        </h3>
                        <div class="graph">
                            <canvas id="myChartCanvas1"></canvas>
                        </div>
                        <div class="label-captura">
                            <p id="avisoCaptura1" style="color: white"></p>
                        </div>
                    </div>

                    <div id="grafico2" class="">
                        <h3 class="tituloGraficos">
                            <span id="tituloAquario2">Usuarios em cada região do país</span>
                        </h3>
                        <div class="graph">
                            <canvas id="myChartCanvas2"></canvas>
                        </div>
                        <div class="label-captura">
                            <p id="avisoCaptura2" style="color: white"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</body>

</html>
<script>
    nomeUsu.innerHTML = "Salve, " + sessionStorage.NOME_USUARIO + "!";

    window.onload = function obterDadosPaginaAnalise() {
        fetch("/medidas/dadoRegiaoNordeste", {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            },

        })
            .then(function (dadoRegiaoNordeste) { //nordeste
                if (dadoRegiaoNordeste.ok) {
                    fetch("/medidas/dadoRegiaoNorte", {
                        method: "GET",
                        headers: {
                            "Content-Type": "application/json",
                        },

                    }).then(function (dadoRegiaoNorte) { // norte
                        if (dadoRegiaoNorte.ok) {
                            fetch("/medidas/dadoRegiaoSudeste", {
                                method: "GET",
                                headers: {
                                    "Content-Type": "application/json",
                                },
                            }).then(function (dadoRegiaoSudeste) { // sudeste
                                if (dadoRegiaoSudeste.ok) {
                                    fetch("/medidas/dadoRegiaoSul", {
                                        method: "GET",
                                        headers: {
                                            "Content-Type": "application/json",
                                        },
                                    }).then(function (dadoRegiaoSul) { // sul
                                        if (dadoRegiaoSul.ok) {
                                            fetch("/medidas/dadoRegiaoCentroOeste", {
                                                method: "GET",
                                                headers: {
                                                    "Content-Type": "application/json",
                                                },
                                            }).then(function (dadoRegiaoCentroOeste) { // centro oeste
                                                if (dadoRegiaoCentroOeste.ok) {
                                                    fetch("/medidas/dados18", {
                                                        method: "GET",
                                                        headers: {
                                                            "Content-Type": "application/json",
                                                        },
                                                    }).then(function (dados18) {
                                                        if (dados18.ok) {
                                                            fetch("/medidas/dados1825", {
                                                                method: "GET",
                                                                headers: {
                                                                    "Content-Type": "application/json",
                                                                },
                                                            }).then(function (dados1825) {
                                                                if (dados1825.ok) {
                                                                    fetch("/medidas/dados2635", {
                                                                        method: "GET",
                                                                        headers: {
                                                                            "Content-Type": "application/json",
                                                                        },
                                                                    }).then(function (dados2635) {
                                                                        if (dados2635.ok) {
                                                                            fetch("/medidas/dados3645", {
                                                                                method: "GET",
                                                                                headers: {
                                                                                    "Content-Type": "application/json",
                                                                                },
                                                                            }).then(function (dados3645) {
                                                                                if (dados3645.ok) {
                                                                                    fetch("/medidas/dados4660", {
                                                                                        method: "GET",
                                                                                        headers: {
                                                                                            "Content-Type": "application/json",
                                                                                        },
                                                                                    }).then(function (dados4660) {
                                                                                        if (dados4660.ok) {
                                                                                            fetch("/medidas/dados60", {
                                                                                                method: "GET",
                                                                                                headers: {
                                                                                                    "Content-Type": "application/json",
                                                                                                },
                                                                                            }).then((dados60) => {
                                                                                                dados60.json().then((dados60) => {
                                                                                                    dados4660.json().then((dados4660) => {
                                                                                                        dados3645.json().then((dados3645) => {
                                                                                                            dados2635.json().then((dados2635) => {
                                                                                                                dados1825.json().then((dados1825) => {
                                                                                                                    dados18.json().then((dados18) => {
                                                                                                                        dadoRegiaoCentroOeste.json().then((dadoRegiaoCentroOeste) => {
                                                                                                                            dadoRegiaoSul.json().then((dadoRegiaoSul) => {
                                                                                                                                dadoRegiaoSudeste.json().then((dadoRegiaoSudeste) => {
                                                                                                                                    dadoRegiaoNorte.json().then((dadoRegiaoNorte) => {
                                                                                                                                        dadoRegiaoNordeste.json().then((dadoRegiaoNordeste) => {
                                                                                                                                            console.log(dadoRegiaoNordeste),
                                                                                                                                                console.log(dadoRegiaoCentroOeste),
                                                                                                                                                console.log(dadoRegiaoNorte),
                                                                                                                                                console.log(dadoRegiaoSudeste)
                                                                                                                                            console.log(dadoRegiaoSul),
                                                                                                                                                console.log(dados18),
                                                                                                                                                console.log(dados1825),
                                                                                                                                                console.log(dados2635),
                                                                                                                                                console.log(dados3645),
                                                                                                                                                console.log(dados4660),
                                                                                                                                                console.log(dados60);

                                                                                                                                            new Chart(document.getElementById('myChartCanvas2'), {
                                                                                                                                                type: 'bar',
                                                                                                                                                data: {
                                                                                                                                                    labels: [""],
                                                                                                                                                    datasets: [{
                                                                                                                                                        label: 'Sudeste',
                                                                                                                                                        data: [`${dadoRegiaoSudeste[0].total}`],
                                                                                                                                                        borderWidth: 9

                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Nordeste',
                                                                                                                                                        data: [`${dadoRegiaoNordeste[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Norte',
                                                                                                                                                        data: [`${dadoRegiaoNorte[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Sul',
                                                                                                                                                        data: [`${dadoRegiaoSul[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Centro-Oeste',
                                                                                                                                                        data: [`${dadoRegiaoCentroOeste[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    }

                                                                                                                                                    ]
                                                                                                                                                },

                                                                                                                                                options: {
                                                                                                                                                    scales: {
                                                                                                                                                        y: {
                                                                                                                                                            beginAtZero: true
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            });

                                                                                                                                            new Chart(document.getElementById('myChartCanvas1'), {
                                                                                                                                                type: 'bar',
                                                                                                                                                data: {
                                                                                                                                                    labels: [""],
                                                                                                                                                    datasets: [{
                                                                                                                                                        label: 'Menores de 18',
                                                                                                                                                        data: [`${dados18[0].total}`],
                                                                                                                                                        borderWidth: 9

                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Entre 18 e 25',
                                                                                                                                                        data: [`${dados1825[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Entre 26 e 35',
                                                                                                                                                        data: [`${dados2635[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Entre 36 e 45',
                                                                                                                                                        data: [`${dados3645[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Entre 46 e 60',
                                                                                                                                                        data: [`${dados4660[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    },
                                                                                                                                                    {

                                                                                                                                                        label: 'Maiores de 60',
                                                                                                                                                        data: [`${dados60[0].total}`],
                                                                                                                                                        borderWidth: 9
                                                                                                                                                    }

                                                                                                                                                    ]
                                                                                                                                                },

                                                                                                                                                options: {
                                                                                                                                                    scales: {
                                                                                                                                                        y: {
                                                                                                                                                            beginAtZero: true
                                                                                                                                                        }
                                                                                                                                                    }
                                                                                                                                                }
                                                                                                                                            });

                                                                                                                                        })
                                                                                                                                    })
                                                                                                                                })
                                                                                                                            })
                                                                                                                        })
                                                                                                                    })
                                                                                                                })
                                                                                                            })
                                                                                                        })
                                                                                                    })
                                                                                                })
                                                                                            })
                                                                                        }
                                                                                    })
                                                                                }
                                                                            })
                                                                        }
                                                                    })
                                                                }
                                                            })
                                                        }
                                                    })
                                                }
                                            })
                                        }
                                    })
                                }
                            })
                        }
                    })
                }
            })

    }
</script>